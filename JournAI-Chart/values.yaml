# Default values for journai

# Global configuration
global:
  # Storage class for persistent volumes (not needed for S3-only deployment)
  storageClass: "gp2"
  
  # AWS-specific settings
  aws:
    region: "us-east-1"
    accountId: ""
    vpcId: ""
    
    # EKS cluster settings
    eks:
      clusterName: "journai-dev-cluster"
      
    # Tags for all AWS resources
    tags:
      Environment: "dev"
      Project: "journai"
      ManagedBy: "terraform"

# Backend configuration
backend:
  replicaCount: 2
  
  image:
    repository: noylevi/journai-backend
    pullPolicy: Always
    tag: "v2.1"
  
  service:
    type: ClusterIP
    port: 3000
    targetPort: 3000
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # Persistence disabled - using S3 for file storage
  persistence:
    enabled: false
    
  # Metrics configuration
  metrics:
    enabled: true
    port: 3000
    path: /metrics
    serviceMonitor:
      enabled: true
      interval: 15s
      scrapeTimeout: 10s

# Frontend configuration
frontend:
  replicaCount: 2
  
  image:
    repository: noylevi/journai-frontend
    pullPolicy: Always
    tag: "v1.4"
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  
# Ingress configuration
ingress:
  enabled: true
  className: alb
  host: ""
  
  # TLS configuration (managed by AWS Certificate Manager)
  tls: false
  certificateArn: ""
  tlsSecretName: ""
  
  # WAF Web ACL (optional)
  webAclId: ""

# S3 Configuration (managed by Terraform)
s3:
  enabled: true
  bucket: ""  # From Terraform: module.s3.bucket_name (format: journai-dev-files)
  region: "us-east-1"

# Secrets configuration
secrets:
  # Use existing secret instead of creating from values
  useExistingSecret: false
  existingSecretName: "journai-secrets"
  
  # Default values (override in values-secrets.yaml)
  jwtSecret: ""
  geminiApiKey: ""
  openaiApiKey: ""
  
  # Database credentials
  db:
    host: ""  # Override in environment-specific values
    client: "postgres"  
    port: "5432"
    name: "journaidb"
    username: "dbadmin"
    password: ""  # Set from secret

  # SSL Configuration for RDS
  ssl:
    enabled: true  # Set to true to enable SSL for RDS
    rejectUnauthorized: true
    caCertPath: "files/certs/global-bundle.pem"
    sslmode: "verify-full"
    sslrootcert: "files/certs/global-bundle.pem"

  # AWS credentials (using Access Keys - set from Terraform or manually)
  aws:
    accessKeyId: ""  # Set from secret
    secretAccessKey: ""  # Set from secret
    region: "us-east-1"
    s3Bucket: ""  # Override in environment-specific values
