# Default values for journai

# Global configuration
global:
  # Storage class for persistent volumes (not needed for S3-only deployment)
  storageClass: "gp2"
  
  # AWS-specific settings
  aws:
    region: "us-east-1"
    accountId: "255195625987"
    vpcId: ""
    
    # EKS cluster settings
    eks:
      clusterName: "journai-dev-cluster"
      
    # Tags for all AWS resources
    tags:
      Environment: "dev"
      Project: "journai"
      ManagedBy: "terraform"

# External Secrets Configuration
externalSecrets:
  enabled: true
  refreshInterval: "1h"
  secretStore:
    name: "aws-secrets-manager"
    region: "us-east-1"

# Backend configuration
backend:
  replicaCount: 2
  
  image:
    repository: noylevi/journai-backend
    pullPolicy: Always
    tag: "v2.1"
  
  service:
    type: ClusterIP
    port: 3000
    targetPort: 3000
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # Persistence disabled - using S3 for file storage
  persistence:
    enabled: false
    
  # Metrics configuration
  metrics:
    enabled: true
    port: 3000
    path: /metrics
    serviceMonitor:
      enabled: true
      interval: 15s
      scrapeTimeout: 10s

# Frontend configuration
frontend:
  replicaCount: 2
  
  image:
    repository: noylevi/journai-frontend
    pullPolicy: Always
    tag: "v1.4"
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  
# Ingress configuration
ingress:
  enabled: true
  className: alb
  host: "journai.site"
  
  # TLS configuration (managed by AWS Certificate Manager)
  tls: true
  certificateArn: "arn:aws:acm:us-east-1:255195625987:certificate/1e3ef2fc-91a9-49ef-866c-16688c1b6f5a"
  tlsSecretName: ""
  
  # WAF Web ACL (optional)
  webAclId: ""

# S3 Configuration (managed by Terraform)
s3:
  enabled: true
  bucket: "journai-dev-files"
  region: "us-east-1"

# Secrets configuration
secrets:
  # Use External Secrets Operator
  useExistingSecret: true
  existingSecretName: "journai-secrets"
  
  # Database credentials
  db:
    host: "journai-db-dev.copascw6amc8.us-east-1.rds.amazonaws.com"  
    client: "postgres"  
    port: "5432"
    name: "journaidb"
    username: "dbadmin"
    password: ""  # password is managed by External Secrets
    
    # SSL Configuration for RDS
    ssl:
      enabled: true  # Set to true to enable SSL for RDS
      rejectUnauthorized: true
      sslmode: "verify-full"
      # Certificate is now managed by External Secrets Operator
      # and mounted at /etc/ssl/certs/rds-ca-cert.pem

  # AWS credentials (using Access Keys - set from Terraform or manually)
  aws:
    accessKeyId: ""  # Set from External Secrets
    secretAccessKey: ""  # Set from External Secrets
    region: "us-east-1"
    s3Bucket: "journai-dev-files" 
